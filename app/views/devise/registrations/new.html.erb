<div class='divise register'>
	
	<div class='site-sprite icon'><span class='hide'>chromada</span></div>
	
	<div class='body'>
		<div class='header'>
			<h1 class='site-sprite title'><span class='hide'>Welcome To Chromada</span></h1>
		</div>

		<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |form| %>
			<%= devise_error_messages! %>

			<div class='form-group'>
			    <%= form.text_field :email, :class => 'required email defaultInvalid', :value => 'email address', :onFocus => 'this.value = ""', :onBlur => 'if(this.value == "") this.value = this.defaultValue;' %>
				<%= form.text_field :username, :class => 'required defaultInvalid', :value => 'user name', :onFocus => 'this.value = ""', :onBlur => 'if(this.value == "") this.value = this.defaultValue;' %>
				<%= form.text_field :password, :class => 'password-clear', :value => 'password', :autocomplete => 'off' %>
				<%= form.password_field :password, :class => 'password-password required password', :value => '', :autocomplete => 'off' %>
				<%= form.text_field :password_confirmation, :class => 'password-confirm-clear', :value => 'confirm password', :autocomplete => 'off' %>
				<%= form.password_field :password_confirmation, :class => 'password-confirm required password', :value => '', :autocomplete => 'off' %>
			</div>
			
			<%= form.submit 'register', :class => 'button register' %>
			
		<% end %>

		<div class='additional-links'>
			<%= render :partial => "devise/shared/links" %>
		</div>
	</div>
</div>

<script type="text/javascript">
	//<![CDATA[
		$('.password-clear').show();
		$('.password-password').hide();
		$('.password-confirm').hide();

		$('.password-clear').focus(function() {
		    $('.password-clear').hide();
		    $('.password-password').show();
		    $('.password-password').focus();
		});
		
		$('.password-password').blur(function() {
		    if($('.password-password').val() == '' && $('.password-password').valid()) {
		        $('.password-clear').show();
		        $('.password-password').hide();
		    }
		});
		
		$('.password-confirm-clear').focus(function() {
		    $('.password-confirm-clear').hide();
			$('.password-confirm').show();
			$('.password-confirm').focus();
		});
		
		$('.password-confirm').blur(function()
		{
		    if($('.password-confirm').val() == '' && $('.password-confirm').valid())
			{
		        $('.password-confirm-clear').show();
		        $('.password-confirm').hide();
		    }
		});
		
		jQuery.validator.addMethod("defaultInvalid", function(value, element) {
		   return value != element.defaultValue;
		}, "");
		
		$("#user_new").validate();
		$('#user_new').submit(function(form)
		{	
			if($("#user_new").valid())
			{
				form.submit();
			}else{
				$('.password-clear').hide();
				$('.password-password').show();
				
				$('.password-confirm-clear').hide();
				$('.password-confirm').show();
			}
		});
	//]]>
</script>